/**
 *
 */
var yonghui={
		contextPath:'https://superip.yonghui.cn',	//域名
		pageSize:10,								//每页数据数量
		groups:5,									//显示页码数量
		maxPageSize:100000000						//默认最大数据量
}

//格式化时间函数
Date.prototype.format = function(format) {
    var date = {
           "M+": this.getMonth() + 1,
           "d+": this.getDate(),
           "h+": this.getHours(),
           "m+": this.getMinutes(),
           "s+": this.getSeconds(),
           "q+": Math.floor((this.getMonth() + 3) / 3),
           "S+": this.getMilliseconds()
    };
    if (/(y+)/i.test(format)) {
           format = format.replace(RegExp.$1, (this.getFullYear() + '').substr(4 - RegExp.$1.length));
    }
    for (var k in date) {
           if (new RegExp("(" + k + ")").test(format)) {
                  format = format.replace(RegExp.$1, RegExp.$1.length == 1
                         ? date[k] : ("00" + date[k]).substr(("" + date[k]).length));
           }
    }
    return format;
}

//关闭click.bs.dropdown.data-api事件，一级菜单恢复href属性
$(document).ready(function() {
    $(document).off('click.bs.dropdown.data-api');
});

//退出系统
var logout=function() {
	layer.alert('确认退出系统？',function(){
		$.ajax({
			type : 'POST',
			url  : '/api/ader/logout.jsp',
			data : {},
			dataType : 'json',
			success : function(data) {
				if(data.errCode == -10000) {
					layer.alert('你尚未登录系统，不能操作');
					return;
				}
				if(data.errCode != 0) {
					layer.alert(data.errMsg);
					return;
				}
		        location.href = yonghui.contextPath + '/ader/login.html';
			},
			error :function(data) {
				layer.alert(data.errMsg);
			}
		});
	});
};


/**
 * placeholder兼容IE
 */
(function placeholderSupport() {
    if (!('placeholder' in document.createElement('input'))) {
        /**
         * 对input框和textarea的特殊处理
         */
        $('input[placeholder]:not([type="password"]),textarea[placeholder]').each(function() {
            var self = this,
                text = $(self).attr('placeholder');

            if ($(self).val() === '') {
                $(self).val(text).addClass('placeholder');
            }
            $(self).focus(function() {
                if ($(self).val() === text) {
                    $(self).val('').removeClass('placeholder');
                }
            }).blur(function() {
                if ($(self).val() === '') {
                    $(self).val(text).addClass('placeholder');
                }
            }).closest('form').submit(function() {
                if ($(self).val() === text) {
                    $(self).val('');
                }
            });
        });
        /**
         * 对password框的特殊处理
         * 1.创建一个text框
         * 2获取焦点和失去焦点的时候切换
         */
        $('input[type="password"][placeholder]').each(function(index, val) {
            var self = this,
                text = $(self).attr('placeholder');
            $(self).after('<input id="pwdPlaceholder' + index + '" type="text" value=' + text + ' autocomplete="off" class="placeholder" />');
            var pwdPlaceholder = $('#pwdPlaceholder' + index);
            pwdPlaceholder.show();
            $(self).hide();

            pwdPlaceholder.focus(function() {
                $(this).hide();
                $(self).show();
                $(self).focus();
            });

            $(self).blur(function() {
                if ($(self).val() == '') {
                    pwdPlaceholder.show();
                    $(self).hide();
                }
            });
        });
    }
})();

